<app-topbar *ngIf="isDonor, else elseBlock" [isShowBackButton]="true" [backButtonPath]="'profile-setup/dietary-restrictions'"></app-topbar>
<ng-template #elseBlock><app-topbar [isShowBackButton]="true" [backButtonPath]="'profile-setup/basic-details'"></app-topbar></ng-template>
<div>
  <div class="section-header">
    <h3>My child's profile</h3>
    <div style="margin-top: -5px; line-height: 20px;">Fill in these details to help us better meet your needs</div>
    <div class="progress" style="height:3px; margin-top:10px">
      <div class="progress-bar" style="width: 83.33%; background: #E793A2;" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
  </div>

  <div *ngIf="childrenProfiles.length !== 0">
    <ul class="list-group list-group-flush">
      Currently saved children
      <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let child of childrenProfiles">
          <h6>{{child.name}}</h6>
          <div class="pull-right" (click)="selectChildProfile(child.childID)"><a class="text-primary">Edit</a></div>
          <div class="pull-right" (click)="deleteChildProfile(child.childID)"><a class="text-danger">Delete</a></div>
      </li>
    </ul>
  </div>

  <div class="row mt-3">
    <form class="form-inline mb-2" [formGroup]="childProfileForm">
      <div class="form-group">
        <label for="name">Name</label>
        <input formControlName="name" type="text" class="form-control" id="name" placeholder="">
      </div>
    </form>
    <div class="col-sm mb-2">
      <form class="form-inline" [formGroup]="childProfileForm">
        <div class="form-group">
        <div>Date of Birth</div>
          <div class="input-group" style="display:flex; align-items:center;">
            <input formControlName="dateOfBirth" class="form-control" placeholder="yyyy-mm-dd" name="dateOfBirth" [maxDate]="maxDate" ngbDatepicker #d="ngbDatepicker" id="childDateOfBirth">
            <div class="input-group-append">
              <i class="fa fa-calendar" style="font-size: 24px; margin-left: 10px;" (click)="d.toggle()" type="button"></i>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="col-sm">
      <form class="form-inline" [formGroup]="childProfileForm">
        <div class="form-group">
        <div id="gender">Gender of child</div>
        <div class="form-check form-check-inline">
          <input formControlName="gender" class="form-check-input" type="radio" name="gender" id="female" value='F'>
          <label class="form-check-label" for="female">F</label>
        </div>
        <div class="form-check form-check-inline">
          <input formControlName="gender" class="form-check-input" type="radio" name="gender" id="male" value='M'>
          <label class="form-check-label" for="male">M</label>
        </div>
        </div>
      </form>
    </div>
  </div>
  
  <div class="form-inline mt-2">
    <div class="form-group">
    <div>Child's allergies</div>
    <div class="accordion" id="allergenListAccordion">
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#allergenList" aria-expanded="false" aria-controls="allergenList" >
          {{this.convertAllergiesToString()}}
        </button>
      </h2>
      <div id="allergenList" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#allergenListAccordion">
        <div class="accordion-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item" *ngFor="let allergen of allergens">
                {{allergen.name}}
                <input class="form-check-input pull-right" type="checkbox" value="" id="flexCheckDefault" [(ngModel)]="allergen.checked">
            </li>
        </ul>
        </div>
      </div>
    </div>
    </div>
    </div>
  </div>
  <a class="mt-2 pull-left" type="button" (click)="saveChild()">
    I have another child
  </a>
  
  <div class="next-button" (click)="onNextButtonClick()">
    <div>Next</div>
  </div>
</div>
